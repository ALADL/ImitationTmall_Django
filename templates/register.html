{% extends 'base.html' %}
{% block title %}注册页面by维民{% endblock %}

{% load staticfiles %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/register.css' %}">
{% endblock %}
{% block extra_js %}
    <script type="text/javascript" src="{% static 'js/register.js' %}"></script>
{% endblock %}

{% block top %}
    <section class="top">
	<nav class="top">
        <div class="top_middle">
            <a href="{% url 'index' %}">
            <span style="color:#C40000;margin:0px" class=" glyphicon glyphicon glyphicon-home redColor"></span>
            天猫首页
            </a>

            {% if request.user.is_authenticated %}
            <a href="/login/">Hi,{{ request.user.username }}</a>
            <a href="#nowhere">积分</a>
            <a href="#nowhere">消息</a>
            <a href="{% url 'logout' %}">退出</a>
            {% else %}
            <span>喵，欢迎来天猫</span>
            <a href="{% url 'login' %}">请登录</a>
            <a href="{% url 'register' %}">免费注册</a>
            {% endif %}

        <span class="pull-right">
            <a href="#nowhere">我的订单</a>
            <a href="#nowhere">
            <span style="color:#C40000;margin:0px" class=" glyphicon glyphicon-shopping-cart redColor"></span>
            购物车<strong>0</strong>件</a>
        </span>
        </div>
	</nav>
    <div class="searchOutDiv">
        <a href="index.html">
        <img src="{% static 'img/site/simpleLogo.png' %}" class="simpleLogo" id="simpleLogo">
        </a>
        <form  method="post" >
            <div class="simpleSearchDiv pull-right">
                <input type="text" name="keyword" placeholder="平衡车 原汁机">
                <button type="button" class="searchButton">搜天猫</button>
                <div class="searchBelow">
                        {% for category in all_category %}
                        {% if forloop.counter <= 4 %}
                        <span>
                        <a href="{% url 'product:classification' category.id %}">{{ category.name }}</a>
                        <span>|</span>
                        </span>
                        {% endif %}
                        {% endfor %}
                </div>
            </div>
        </form>
    </div>
</section>
{% endblock %}

{% block content %}
<section class="body">
    <form id="email_register_form" method="post" action="{% url 'register' %}" autocomplete="off">
    <div class="registerDiv">
    	<div class="registerErrorMessageDiv">
		    <div class="alert alert-danger" role="alert">
		        <button type="button" class="close" data-dismiss="alert" aria-label="Close"></button>
		  	    <span class="errorMessage">
                    {% for key,error in register_form.errors.items %}
                        {{ error }}
                    {% endfor %}
                    {{ msg }}
                </span>
		    </div>
	    </div>
    <table align="center" class="registerTable">
        <tbody>
        <tr>
            <td class="registerTip registerTableLeftTD">设置会员名</td>
            <td></td>
        </tr>
        <tr>
            <td class="registerTableLeftTD">注册邮箱</td>
            <td class="registerTableRightTD"><input placeholder="注册邮箱一旦设置成功，无法修改" name="email" id="email" value="{{ register_form.email.value }}"> </td>
        </tr>
        <tr>
            <td class="registerTip registerTableLeftTD">设置登陆密码</td>
            <td class="registerTableRightTD">登陆时验证，保护账号信息</td>
        </tr>
        <tr>
            <td class="registerTableLeftTD">登陆密码</td>
            <td class="registerTableRightTD"><input type="password" placeholder="设置你的登陆密码" name="password" id="password" value="{{ register_form.email.value }}"> </td>
        </tr>
        <tr>
            <td class="registerTableLeftTD">密码确认</td>
            <td class="registerTableRightTD"><input type="password" placeholder="请再次输入你的密码" name="repeatpassword" id="repeatpassword" value="{{ register_form.email.value }}"> </td>
        </tr>
        <tr>
            <td class="registerTableLeftTD">验证码</td>
            <td class="registerTableRightTD" >{{ register_form.captcha }}</td>
        </tr>
{#        <tr>#}
{#            <td class="registerTableRightTD">{% for key,error in register_form.errors.items %}{{ key }}{{ "是必填项" }}{% endfor %}{{ msg }}</td>#}
{#        </tr>#}
        <tr>
            <td class="registerButtonTD" colspan="2">
                <a href="#nowhere" onclick="checkUser()"><button>提   交</button></a>
            </td>
        </tr>
        </tbody>
    </table>
        {% csrf_token %}
    </div>
    </form>
</section>
{% endblock %}


